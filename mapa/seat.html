<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Planner | Mapa</title>
<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
<meta http-equiv="Pragma" content="no-cache"/>
<meta http-equiv="Expires" content="0"/>
<script>if(location.pathname.endsWith("index.html"))location.replace(location.pathname.replace("index.html",""));</script>
<style>
body{
  font-family:Arial, sans-serif;
  margin:0;
  padding:0;
  display:flex;
  flex-direction:column;
  min-height:100vh;
  justify-content:center;
  background:#fafafa;
}

#bus-wrapper{
  transform:scale(.8);
  transform-origin:top center;
  display:none;
}

.bus-container{
  padding:20px;
  border-radius:16px;
  width:fit-content;
  margin:20px auto;
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:center;
  background:#fff;
  box-shadow:0 4px 20px rgba(0,0,0,0.05);
}

.grid{
  display:grid;
  grid-template-columns:54px 54px 24px 54px 54px; /* pares + corredor central */
  gap:14px 20px; /* mais espaçamento para estilo floating */
  justify-items:center;
  margin-bottom:20px;
}

.seat, .empty{
  width:54px;
  height:54px;
  display:flex;
  align-items:center;
  justify-content:center;
  border-radius:16px;
  font-weight:bold;
  cursor:pointer;
  transition:all 0.2s ease;
}

.seat.available{
  background:#f0f0f0;
  color:#333;
}

.seat.selected{
  background:#4CAF50;
  color:#fff;
  transform:scale(1.1);
}

.seat.occupied{
  background:#b0b0b0;
  color:#fff;
  cursor:not-allowed;
}

.seat.white{
  background:#fff!important;
  border:none!important;
  color:transparent!important;
  pointer-events:none!important;
}

#confirmarBtn{
  padding:12px 24px;
  background:#4CAF50;
  color:#fff;
  border:none;
  border-radius:16px;
  cursor:pointer;
  font-weight:bold;
  transition:background 0.2s ease;
}

#confirmarBtn:hover{
  background:#009e8f;
}

#progress-bar-container{
  position:fixed;
  bottom:0;
  left:0;
  width:100%;
  height:8px;
  background:#0001;
  z-index:9999;
}

#progress-bar{
  width:0;
  height:100%;
  background:#4CAF50;
  transition:width .1s linear;
}

#cursoBox{
  position:absolute;
  top:60px;
  left:100%;
  width:40px;
  height:122px;
  background:#4CAF50;
  color:#fff;
  font-weight:bold;
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:9999;
  overflow:hidden;
  pointer-events:none;
}

#cursoText{
  transform:rotate(-90deg);
  font-size:18px;
  white-space:nowrap;
}
</style>
</head>
<body>
<div id="bus-wrapper">
  <div class="bus-container">
    <div id="cursoBox"><div id="cursoText"></div></div>
    <!-- Grid de poltronas será renderizado pelo JS -->
    <button id="confirmarBtn">CONFIRMAR</button>
  </div>
</div>
<div id="progress-bar-container"><div id="progress-bar"></div></div>

<script>
(() => { if(!sessionStorage.getItem("cacheStamp")) sessionStorage.setItem("cacheStamp",Date.now()) })();

// Funções JS existentes para renderização, seleção e envio continuam iguais
const q=(s,d=document)=>d.querySelector(s), 
normCPF=c=>c?.toString().replace(/\D/g,"").padStart(11,"0")||"", 
cSeat=v=>{const e=document.createElement("div");
    return v===null?e.className="empty":
           v==="white"?e.className="seat white":
           (e.className="seat available", e.textContent=v.toString().padStart(2,"0")), e
}, 
selSeat=e=>{if(e.classList.contains("white")||e.classList.contains("occupied"))return; sel?.classList.remove("selected"); sel=e!==sel?(e.classList.add("selected"),e):null};

let sel=null, bl=[], rb=[], rbSet=new Set(), userBlockedSeats=[], fakeBlockedSeats=[], currentUserCPF=null, currentCurso="", currentBus="", layout=[];

// ... resto do JS continua igual, sem alteração
</script>
</body>
</html>
