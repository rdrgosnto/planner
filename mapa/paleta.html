<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Planner | Mapa Fake</title>
<style>
body{font-family:Arial;margin:0;padding:0;display:flex;flex-direction:column;min-height:100vh;justify-content:center;background:#fff}
#bus-wrapper{transform:scale(.8);transform-origin:top center;display:block}
.bus-container{padding:20px;border:3px solid #b0b0b0;border-radius:16px;width:fit-content;margin:20px auto;position:relative;display:flex;justify-content:center;background:#fff}
.grid{display:grid;grid-template-columns:repeat(5,54px);gap:14px 10px;justify-content:center;justify-items:center}
.seat,.empty{width:54px;height:54px;display:flex;align-items:center;justify-content:center;border-radius:12px;position:relative;transition:0.2s}
.seat{background:#4CAF50;border:3px solid #4CAF50;color:#fff;font-weight:bold;cursor:pointer;user-select:none}
.seat.selected{background:#e74c3c}
.seat.white{background:#fff;border:3px solid #8c96b2;color:transparent;pointer-events:none}
.seat.lost-temp{background:#aaa;border-color:#777;color:transparent;pointer-events:none}
#confirmarBtn{width:112px;height:54px;background:#4CAF50;color:#fff;border:none;font-size:16px;font-weight:bold;border-radius:12px;cursor:pointer;position:absolute;bottom:-64px;right:20px;user-select:none}
#colorPanel{position:fixed;top:10px;left:10px;background:#fff;padding:15px;border-radius:12px;box-shadow:0 0 10px #0002;max-width:260px;font-size:14px;z-index:1000}
.color-row{margin-bottom:10px}
.color-label{margin-bottom:4px;font-weight:bold}
.color-options button{width:28px;height:28px;margin-right:4px;border:none;border-radius:4px;cursor:pointer}
#resetBtn{margin-top:8px;padding:5px 10px;background:#bbb;border:none;border-radius:6px;cursor:pointer;font-weight:bold}
</style>
</head>
<body>

<!-- Painel de cores -->
<div id="colorPanel">
    <div class="color-row">
        <div class="color-label">Poltrona</div>
        <div class="color-options">
            <button style="background:#D9D9D9" onclick="setColor('seat','#D9D9D9')"></button>
            <button style="background:#BFBFBF" onclick="setColor('seat','#BFBFBF')"></button>
            <button style="background:#8C8B88" onclick="setColor('seat','#8C8B88')"></button>
            <button style="background:#59514C" onclick="setColor('seat','#59514C')"></button>
            <button style="background:#261311" onclick="setColor('seat','#261311')"></button>
        </div>
    </div>
    <div class="color-row">
        <div class="color-label">Borda da Poltrona</div>
        <div class="color-options">
            <button style="background:#D9D9D9" onclick="setColor('seatBorder','#D9D9D9')"></button>
            <button style="background:#BFBFBF" onclick="setColor('seatBorder','#BFBFBF')"></button>
            <button style="background:#8C8B88" onclick="setColor('seatBorder','#8C8B88')"></button>
            <button style="background:#59514C" onclick="setColor('seatBorder','#59514C')"></button>
            <button style="background:#261311" onclick="setColor('seatBorder','#261311')"></button>
        </div>
    </div>
    <div class="color-row">
        <div class="color-label">Poltrona Selecionada</div>
        <div class="color-options">
            <button style="background:#D9D9D9" onclick="setColor('selected','#D9D9D9')"></button>
            <button style="background:#BFBFBF" onclick="setColor('selected','#BFBFBF')"></button>
            <button style="background:#8C8B88" onclick="setColor('selected','#8C8B88')"></button>
            <button style="background:#59514C" onclick="setColor('selected','#59514C')"></button>
            <button style="background:#261311" onclick="setColor('selected','#261311')"></button>
        </div>
    </div>
    <div class="color-row">
        <div class="color-label">Poltrona Bloqueada</div>
        <div class="color-options">
            <button style="background:#D9D9D9" onclick="setColor('blocked','#D9D9D9')"></button>
            <button style="background:#BFBFBF" onclick="setColor('blocked','#BFBFBF')"></button>
            <button style="background:#8C8B88" onclick="setColor('blocked','#8C8B88')"></button>
            <button style="background:#59514C" onclick="setColor('blocked','#59514C')"></button>
            <button style="background:#261311" onclick="setColor('blocked','#261311')"></button>
        </div>
    </div>
    <div class="color-row">
        <div class="color-label">Caixa da Turma</div>
        <div class="color-options">
            <button style="background:#D9D9D9" onclick="setColor('cursoBox','#D9D9D9')"></button>
            <button style="background:#BFBFBF" onclick="setColor('cursoBox','#BFBFBF')"></button>
            <button style="background:#8C8B88" onclick="setColor('cursoBox','#8C8B88')"></button>
            <button style="background:#59514C" onclick="setColor('cursoBox','#59514C')"></button>
            <button style="background:#261311" onclick="setColor('cursoBox','#261311')"></button>
        </div>
    </div>
    <div class="color-row">
        <div class="color-label">Botão Confirmar</div>
        <div class="color-options">
            <button style="background:#D9D9D9" onclick="setColor('confirmBtn','#D9D9D9')"></button>
            <button style="background:#BFBFBF" onclick="setColor('confirmBtn','#BFBFBF')"></button>
            <button style="background:#8C8B88" onclick="setColor('confirmBtn','#8C8B88')"></button>
            <button style="background:#59514C" onclick="setColor('confirmBtn','#59514C')"></button>
            <button style="background:#261311" onclick="setColor('confirmBtn','#261311')"></button>
        </div>
    </div>
    <div class="color-row">
        <div class="color-label">Fundo do Mapa</div>
        <div class="color-options">
            <button style="background:#D9D9D9" onclick="setColor('bus','#D9D9D9')"></button>
            <button style="background:#BFBFBF" onclick="setColor('bus','#BFBFBF')"></button>
            <button style="background:#8C8B88" onclick="setColor('bus','#8C8B88')"></button>
            <button style="background:#59514C" onclick="setColor('bus','#59514C')"></button>
            <button style="background:#261311" onclick="setColor('bus','#261311')"></button>
        </div>
    </div>
    <div class="color-row">
        <div class="color-label">Fundo da Página</div>
        <div class="color-options">
            <button style="background:#D9D9D9" onclick="setColor('body','#D9D9D9')"></button>
            <button style="background:#BFBFBF" onclick="setColor('body','#BFBFBF')"></button>
            <button style="background:#8C8B88" onclick="setColor('body','#8C8B88')"></button>
            <button style="background:#59514C" onclick="setColor('body','#59514C')"></button>
            <button style="background:#261311" onclick="setColor('body','#261311')"></button>
        </div>
    </div>
    <button id="resetBtn" onclick="resetColors()">Resetar</button>
</div>

<div id="bus-wrapper">
  <div class="bus-container" id="busContainer">
    <div id="cursoBox">TURMA</div>
    <button id="confirmarBtn">CONFIRMAR</button>
  </div>
</div>

<script>
// Cores originais
const originalColors = {
    seat:'#4CAF50',
    seatBorder:'#4CAF50',
    selected:'#e74c3c',
    blocked:'#fff',
    cursoBox:'#4CAF50',
    confirmBtn:'#4CAF50',
    bus:'#fff',
    body:'#fff'
};

// Criar mapa fake 46 poltronas, 2 pares + corredor
const busContainer = document.getElementById('busContainer');
const grid = document.createElement('div');
grid.className = 'grid';

let seatNumber = 1;
for(let r=0;r<12;r++){
    for(let c=0;c<5;c++){
        let seat = document.createElement('div');
        if(c===2){ seat.className='empty'; }
        else{
            seat.className='seat';
            if(seatNumber<=46) seat.textContent = seatNumber.toString().padStart(2,'0');
            seat.dataset.seat = seatNumber.toString().padStart(2,'0');
            seat.onclick = ()=>selectSeat(seat);
            seatNumber++;
        }
        grid.appendChild(seat);
    }
}
busContainer.appendChild(grid);

let selectedSeat = null;
function selectSeat(seat){
    if(seat.classList.contains('white') || seat.classList.contains('lost-temp')) return;
    if(selectedSeat) selectedSeat.classList.remove('selected');
    selectedSeat = seat===selectedSeat?null:seat;
    if(selectedSeat) selectedSeat.classList.add('selected');
}

// Botão confirmar
document.getElementById('confirmarBtn').onclick = ()=>{
    if(!selectedSeat){ alert("Selecione uma poltrona."); return; }

    // Simula conflito de seleção: 20% chance
    const conflito = Math.random() < 0.2;
    if(conflito){
        selectedSeat.classList.add('lost-temp');
        selectedSeat.classList.remove('selected');
        setTimeout(()=>{
            selectedSeat.classList.remove('lost-temp');
            selectedSeat.classList.add('white');
            selectedSeat=null;
        },2000);
        alert("Conflito: poltrona selecionada por outro usuário!");
        return;
    }

    // Seleção válida
    selectedSeat.style.background = originalColors.selected;
    alert("Poltrona selecionada: "+selectedSeat.dataset.seat);
};

// Painel de cores
function setColor(target,color){
    switch(target){
        case 'seat': document.querySelectorAll('.seat').forEach(s=>{
            if(!s.classList.contains('selected') && !s.classList.contains('lost-temp') && !s.classList.contains('white'))
                s.style.background=color;
        }); break;
        case 'seatBorder': document.querySelectorAll('.seat').forEach(s=>s.style.borderColor=color); break;
        case 'selected': if(selectedSeat) selectedSeat.style.background=color; break;
        case 'blocked': document.querySelectorAll('.white').forEach(s=>s.style.background=color); break;
        case 'cursoBox': document.getElementById('cursoBox').style.background=color; break;
        case 'confirmBtn': document.getElementById('confirmarBtn').style.background=color; break;
        case 'bus': document.getElementById('busContainer').style.background=color; break;
        case 'body': document.body.style.background=color; break;
    }
}

function resetColors(){
    document.querySelectorAll('.seat').forEach(s=>{
        s.style.background=originalColors.seat;
        s.style.borderColor=originalColors.seatBorder;
        s.classList.remove('selected','lost-temp','white');
    });
    document.getElementById('cursoBox').style.background = originalColors.cursoBox;
    document.getElementById('confirmarBtn').style.background = originalColors.confirmBtn;
    document.getElementById('busContainer').style.background = originalColors.bus;
    document.body.style.background = originalColors.body;
    selectedSeat=null;
}
</script>
</body>
</html>
