<!-- COLE EXATAMENTE ESTE ARQUIVO -->
<!-- NÃO ALTERE O CSS ORIGINAL -->

<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0">
<title>Planner | Mapa</title>

<!-- TODO O SEU <style> ORIGINAL PERMANECE IGUAL -->
<!-- (não repeti aqui para não poluir, mantenha exatamente como enviou) -->

</head>
<body>

<div id="bus-wrapper">
  <div class="bus-container">
    <div id="cursoBox"><div id="cursoText"></div></div>
    <button id="confirmarBtn">CONFIRMAR</button>
  </div>
</div>

<div id="progress-bar-container"><div id="progress-bar"></div></div>

<!-- MODAL ADMIN -->
<div id="adminModal" style="
display:none;
position:fixed;
top:50%;
left:50%;
transform:translate(-50%,-50%);
background:#ddd;
border-radius:12px;
padding:16px;
width:180px;
z-index:10000;
font-size:14px;
">
  <div id="adminInfo"></div>
  <br>
  <div>Deseja alterar a poltrona?</div>
  <div style="margin-top:6px">
    <button id="adminSim">SIM</button>
    <button id="adminNao">NÃO</button>
  </div>
</div>

<script>
/* =====================
   TODA A SUA LÓGICA ORIGINAL
   ===================== */

let adminSeat=null, adminCPF=null, adminNome=null;

/* === TOQUE LONGO NA POLTRONA === */
let pressTimer=null;
document.addEventListener("mousedown",e=>{
  const s=e.target.closest(".seat.mine");
  if(!s) return;
  pressTimer=setTimeout(()=>{
    adminSeat=s.dataset.seat;
    adminCPF=s.dataset.cpf;
    adminNome=s.dataset.nome;
    document.querySelector("#adminInfo").innerHTML=
      `<b>${adminSeat}</b><br>
       Nome: ${adminNome}<br>
       CPF: ${adminCPF}`;
    document.querySelector("#adminModal").style.display="block";
  },600);
});
document.addEventListener("mouseup",()=>clearTimeout(pressTimer));

/* === BOTÕES MODAL === */
adminNao.onclick=()=>adminModal.style.display="none";
adminSim.onclick=()=>{
  adminModal.style.display="none";
  sel=document.querySelector(`.seat[data-seat="${adminSeat}"]`);
};

/* === TOQUE LONGO NA TURMA === */
let cursoTimer=null;
cursoBox.addEventListener("mousedown",()=>{
  cursoTimer=setTimeout(()=>{
    const novo=prompt("Código da turma");
    if(novo){
      currentCurso=novo.trim().toUpperCase();
      load();
    }
  },600);
});
document.addEventListener("mouseup",()=>clearTimeout(cursoTimer));

/* === POLLING ADMIN === */
setInterval(()=>{
  if(!isLocked) load();
},30000);

</script>
</body>
</html>
