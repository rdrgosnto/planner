<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pina | Ingresso</title>
<style>
*{box-sizing:border-box;margin:0;padding:0}html,body{width:100%;height:100%;background:#000;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;color:#fff;overflow:hidden;-webkit-user-select:none;user-select:none;-webkit-touch-callout:none}#videoFundo{position:absolute;top:50%;left:50%;height:100%;width:auto;transform:translate(-50%,-50%);object-fit:contain;background:#000;z-index:0;transition:filter .9s}#videoFundo.pausado{filter:brightness(.55)}.cinema-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(0,0,0,.55),rgba(0,0,0,.2),rgba(0,0,0,.6));z-index:1}.overlay{position:absolute;inset:0;z-index:2}.cpf-group{position:absolute;bottom:clamp(30px,6vh,80px);left:50%;transform:translateX(-50%);width:90%;max-width:400px;display:flex;flex-direction:column;gap:10px}.label-cpf{font-size:14px}.status{min-height:18px;font-size:14px}.cpf-field{height:48px;border-radius:0;border:1px solid rgba(255,255,255,.25);background:rgba(0,0,0,.45);display:flex;align-items:center;padding:0 12px;backdrop-filter:blur(4px)}.cpf-field input{width:100%;border:none;outline:none;background:transparent;color:#fff;font-size:15px;line-height:48px;padding:0;-webkit-user-select:text;user-select:text}.cpf-field input::placeholder{font-size:12px;color:#cfcfcf}.btn-primary{display:none;height:48px;border:none;border-radius:0;background:#fff;color:#000;font-size:15px;font-weight:500;cursor:pointer}.btn-primary:hover{background:#eaeaea}
</style>
</head>
<body>
<video id="videoFundo" autoplay muted playsinline loop><source src="pina_.mp4" type="video/mp4"></video>
<div class="cinema-overlay"></div>
<div class="overlay">
<div class="cpf-group">
<div class="label-cpf">CPF (somente números)</div>
<div class="cpf-field"><input id="cpfInput" inputmode="numeric" placeholder="CPF (somente números)" autocomplete="off"></div>
<div class="status" id="statusMsg"></div>
<button class="btn-primary" id="btnDownload">Baixar ingresso</button>
</div>
</div>
<script>
const cpf=document.getElementById("cpfInput"),btn=document.getElementById("btnDownload"),status=document.getElementById("statusMsg"),vid=document.getElementById("videoFundo");vid.playbackRate=1;let t,debounce;const norm=v=>v.replace(/\D/g,"").padStart(11,"0"),valido=c=>!/^(\d)\1+$/.test(c)&&[9,10].every(t=>{let s=0;for(let i=0;i<t;i++)s+=c[i]*(t+1-i);return((s*10)%11)%10==c[t]});function pausar(){vid.classList.add("pausado");setTimeout(()=>{if(!vid.paused)vid.pause()},450)}function tocar(){vid.play().catch(()=>{});vid.classList.remove("pausado")}let hT=null,emH=false,H=250;function startHold(){if(hT)return;hT=setTimeout(()=>{emH=true;pausar()},H)}function endHold(){clearTimeout(hT);hT=null;if(emH){emH=false;tocar()}}document.addEventListener("touchstart",startHold,{passive:true});document.addEventListener("touchend",endHold);document.addEventListener("touchcancel",endHold);document.addEventListener("mousedown",startHold);document.addEventListener("mouseup",endHold);document.addEventListener("mouseleave",endHold);
async function buscar(c){const r=await fetch("https://default264c851fa4e743cf86bcd7b10dca85.78.environment.api.powerplatform.com:443/powerautomate/automations/direct/workflows/8a482c5f6dd04dd3b167d97ea0a07307/triggers/manual/paths/invoke?api-version=1&sp=%2Ftriggers%2Fmanual%2Frun&sv=1.0&sig=kWvGjXp0sqrlB9TuVb02vSAeLqwEjTU0-dU9J0HqkFE",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cpf:c})});const d=await r.json();return(d.codigo||[]).find(x=>norm(x.CPF2||"")===c&&x.GOOGLE)};cpf.oninput=()=>{cpf.value=cpf.value.replace(/\D/g,"");pausar();btn.style.display="none";status.textContent="";clearTimeout(debounce);if(cpf.value.length<11){status.textContent="CPF inválido";return}cpf.blur();debounce=setTimeout(()=>validar(norm(cpf.value)),400)};async function validar(c){if(!valido(c)){status.textContent="CPF inválido";pausar();return}tocar();try{const a=await buscar(c);if(!a)throw 0;status.textContent="CPF localizado";pausar();btn.style.display="block";btn.onclick=()=>{tocar();const l=document.createElement("a");l.href=`https://drive.google.com/uc?export=download&id=${a.GOOGLE}`;l.download="ingresso.png";document.body.appendChild(l);l.click();document.body.removeChild(l)}}catch{s="CPF não autorizado";status.textContent=s;pausar();btn.style.display="none"}}
</script>
</body>
</html>
